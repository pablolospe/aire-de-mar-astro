---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { Image } from 'astro:assets';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map(project => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---
<BaseLayout title={project.data.title}>
    <div class="project-detail-container">
        <button onclick="history.back()" class="back-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
            Volver
        </button>
        <h1>{project.data.title.toUpperCase()}</h1>
        <p class="project-location">{project.data.location}</p>
        <p class="project-year">{project.data.year}</p>

        <br>
        <Image
            src={project.data.image}
            alt={project.data.title}
            transition:name={`portada${project.data.image}`}
            class="w-full h-auto"
            height={500}
            width={950}
            loading="eager"
        />
        <div class="project-content">
            <Content />
        </div>
    </div>
</BaseLayout>

<style>
    .back-button {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        margin-bottom: 1.5rem;
        background-color: #f3f4f6; /* light gray */
        color: #374151; /* dark gray text */
        border: none;
        border-radius: 0.375rem; /* rounded-md */
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
    }

    .back-button:hover {
        background-color: #e5e7eb; /* slightly darker gray */
        color: #1f2937; /* even darker gray text */
    }

    .back-button svg {
        width: 1.25rem;
        height: 1.25rem;
    }

    .project-detail-container {
        max-width: 960px;
        margin: 2rem auto;
        padding: 2rem;
    }
    .project-content {
        margin-top: 2rem;
    }
    .project-content :global(img) {
        max-width: 100%;
        height: auto;
        margin-top: 1.5rem;
    }
</style>
